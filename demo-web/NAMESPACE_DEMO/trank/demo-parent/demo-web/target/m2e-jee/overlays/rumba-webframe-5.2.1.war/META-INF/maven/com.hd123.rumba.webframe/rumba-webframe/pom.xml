<?xml version="1.0" encoding="UTF-8"?>
<!-- 版权所有(C)，上海海鼎信息工程股份有限公司，2013，所有权利保留。 -->
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
	<modelVersion>4.0.0</modelVersion>
	<parent>
		<artifactId>rumba-webframe-parent</artifactId>
		<groupId>com.hd123.rumba.webframe</groupId>
		<version>5.2.1</version>
		<relativePath>..</relativePath>
	</parent>
	<artifactId>rumba-webframe</artifactId>
	<packaging>war</packaging>
	<name>WebFrame</name>
	<description>核心功能组件。</description>

	<distributionManagement>
		<site>
			<id>site</id>
			<url>ftp://ftp.hddomain.cn/wikifs/PDC/Rumba/site/webframe/${project.version}/rumba-webframe</url>
		</site>
	</distributionManagement>

	<dependencies>
		<dependency>
			<groupId>com.hd123.rumba</groupId>
			<artifactId>rumba-widget2</artifactId>
		</dependency>
		<dependency>
			<!-- 必须位于com.google.gwt:gwt-user与gwt-servlet之前。 -->
			<groupId>com.hd123.rumba</groupId>
			<artifactId>rumba-widget2</artifactId>
			<classifier>sources</classifier>
		</dependency>
		<dependency>
			<groupId>com.google.gwt</groupId>
			<artifactId>gwt-dev</artifactId>
		</dependency>
		<dependency>
			<groupId>com.google.gwt</groupId>
			<artifactId>gwt-servlet</artifactId>
			<scope>runtime</scope>
		</dependency>
		<dependency>
			<groupId>com.google.gwt</groupId>
			<artifactId>gwt-user</artifactId>
		</dependency>
		<dependency>
			<groupId>com.google.web.bindery</groupId>
			<artifactId>requestfactory-server</artifactId>
			<scope>runtime</scope>
		</dependency>

		<dependency>
			<groupId>com.hd123.ia</groupId>
			<artifactId>ia-audit-api</artifactId>
		</dependency>
		<dependency>
			<groupId>com.hd123.ia</groupId>
			<artifactId>ia-authen-api</artifactId>
		</dependency>
		<dependency>
			<groupId>com.hd123.ia</groupId>
			<artifactId>ia-author-api</artifactId>
		</dependency>
		<dependency>
			<groupId>com.hd123.ia</groupId>
			<artifactId>ia-author-transport</artifactId>
		</dependency>
		<dependency>
			<groupId>com.hd123.ia</groupId>
			<artifactId>ia-cas-server-api</artifactId>
		</dependency>
		<dependency>
			<groupId>com.hd123.ia</groupId>
			<artifactId>ia-cas-widget-gwt2</artifactId>
		</dependency>
		<dependency>
			<groupId>com.hd123.ia</groupId>
			<artifactId>ia-cas-widget-gwt2</artifactId>
			<classifier>sources</classifier>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.hd123.ia</groupId>
			<artifactId>ia-ui-widget-gwt2</artifactId>
		</dependency>
		<dependency>
			<groupId>com.hd123.ia</groupId>
			<artifactId>ia-ui-widget-gwt2</artifactId>
			<classifier>sources</classifier>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.hd123.license</groupId>
			<artifactId>heading-license</artifactId>
		</dependency>
		<dependency>
			<groupId>com.hd123.rumba.commons</groupId>
			<artifactId>rumba-commons-biz</artifactId>
		</dependency>
		<dependency>
			<groupId>com.hd123.rumba.commons</groupId>
			<artifactId>rumba-commons-gwt</artifactId>
		</dependency>
		<dependency>
			<groupId>com.hd123.rumba.commons</groupId>
			<artifactId>rumba-commons-gwt</artifactId>
			<classifier>sources</classifier>
		</dependency>
		<dependency>
			<groupId>com.hd123.rumba.commons</groupId>
			<artifactId>rumba-commons-mini</artifactId>
		</dependency>
		<dependency>
			<groupId>com.hd123.rumba.commons</groupId>
			<artifactId>rumba-commons-rpc</artifactId>
		</dependency>
		<dependency>
			<groupId>com.hd123.rumba.notice</groupId>
			<artifactId>rumba-notice-gwt2</artifactId>
		</dependency>
		<dependency>
			<groupId>com.hd123.rumba.notice</groupId>
			<artifactId>rumba-notice-gwt2</artifactId>
			<classifier>sources</classifier>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>javax.servlet</groupId>
			<artifactId>servlet-api</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>junit</groupId>
			<artifactId>junit</artifactId>
		</dependency>
		<dependency>
			<groupId>log4j</groupId>
			<artifactId>log4j</artifactId>
			<scope>test</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.commons</groupId>
			<artifactId>commons-lang3</artifactId>
		</dependency>
		<dependency>
			<groupId>org.slf4j</groupId>
			<artifactId>slf4j-api</artifactId>
		</dependency>
		<dependency>
			<groupId>org.slf4j</groupId>
			<artifactId>slf4j-log4j12</artifactId>
			<scope>test</scope>
		</dependency>
		<dependency>
			<groupId>org.springframework</groupId>
			<artifactId>spring-core</artifactId>
		</dependency>
		<dependency>
			<groupId>org.springframework</groupId>
			<artifactId>spring-beans</artifactId>
		</dependency>
		<dependency>
			<groupId>org.springframework</groupId>
			<artifactId>spring-context</artifactId>
		</dependency>
		<dependency>
			<groupId>org.springframework</groupId>
			<artifactId>spring-web</artifactId>
		</dependency>
		<dependency>
			<groupId>org.jasig.cas.client</groupId>
			<artifactId>cas-client-core</artifactId>
		</dependency>
	</dependencies>

	<build>
		<plugins>
			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-javadoc-plugin</artifactId>
				<executions>
					<execution>
						<phase>package</phase>
						<goals>
							<goal>jar</goal>
						</goals>
					</execution>
				</executions>
				<configuration>
					<docfilessubdirs>true</docfilessubdirs>
				</configuration>
			</plugin>
			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-source-plugin</artifactId>
				<executions>
					<execution>
						<phase>package</phase>
						<goals>
							<goal>jar-no-fork</goal>
						</goals>
					</execution>
				</executions>
			</plugin>
		</plugins>
	</build>

	<profiles>
		<profile>
			<id>default</id>
			<activation>
				<activeByDefault>true</activeByDefault>
			</activation>
			<build>
				<plugins>
					<plugin>
						<groupId>org.apache.maven.plugins</groupId>
						<artifactId>maven-war-plugin</artifactId>
						<configuration>
							<version>3.0</version>
							<archiveClasses>true</archiveClasses>
							<failOnMissingWebXml>false</failOnMissingWebXml>
							<packagingExcludes>WEB-INF/lib/*.jar</packagingExcludes>
							<attachClasses>true</attachClasses>
							<webResources>
								<resource>
									<directory>${basedir}/target/webapp</directory>
								</resource>
							</webResources>
						</configuration>
					</plugin>
				</plugins>
			</build>
		</profile>

		<profile>
			<id>gwt</id>
			<activation>
				<property>
					<name>gwt</name>
				</property>
			</activation>
			<build>
				<plugins>
					<plugin>
						<groupId>org.apache.maven.plugins</groupId>
						<artifactId>maven-antrun-plugin</artifactId>
						<executions>
							<execution>
								<phase>prepare-package</phase>
								<goals>
									<goal>run</goal>
								</goals>
								<configuration>
									<target>
										<mkdir dir="${basedir}/target/webapp" />
									</target>
								</configuration>
							</execution>
						</executions>
					</plugin>
					<plugin>
						<groupId>org.apache.maven.plugins</groupId>
						<artifactId>maven-war-plugin</artifactId>
						<configuration>
							<archiveClasses>true</archiveClasses>
							<failOnMissingWebXml>false</failOnMissingWebXml>
							<packagingExcludes>WEB-INF/lib/*.jar</packagingExcludes>
							<attachClasses>true</attachClasses>
							<webResources>
								<resource>
									<directory>${basedir}/target/webapp</directory>
								</resource>
							</webResources>
						</configuration>
					</plugin>
					<plugin>
						<groupId>org.codehaus.mojo</groupId>
						<artifactId>gwt-maven-plugin</artifactId>
						<executions>
							<execution>
								<id>compile-www</id>
								<phase>prepare-package</phase>
								<goals>
									<goal>compile</goal>
								</goals>
								<configuration>
									<webappDirectory>${basedir}/target/webapp/www</webappDirectory>
									<deploy>${basedir}/target/gwt-cache</deploy>
									<persistentunitcache>true</persistentunitcache>
									<persistentunitcachedir>${basedir}/target/gwt-cache</persistentunitcachedir>
									<modules>
										<module>com.hd123.rumba.webframe.gwt.mainframe.MainFrame</module>
										<module>com.hd123.rumba.webframe.gwt.about.About</module>
										<module>com.hd123.rumba.webframe.gwt.home.Home</module>
										<module>com.hd123.rumba.webframe.gwt.personalize.Personalize</module>
										<module>com.hd123.rumba.webframe.gwt.noauthorized.NoAuthorized</module>
									</modules>
								</configuration>
							</execution>
							<execution>
								<id>compile-www2</id>
								<phase>prepare-package</phase>
								<goals>
									<goal>compile</goal>
								</goals>
								<configuration>
									<webappDirectory>${basedir}/target/webapp/www2</webappDirectory>
									<deploy>${basedir}/target/gwt-cache</deploy>
									<persistentunitcache>true</persistentunitcache>
									<persistentunitcachedir>${basedir}/target/gwt-cache</persistentunitcachedir>
									<modules>
										<module>com.hd123.rumba.webframe.gwt.entry.Entry</module>
										<module>com.hd123.rumba.webframe.gwt.nolicense.NoLicense</module>
									</modules>
								</configuration>
							</execution>
						</executions>
					</plugin>
				</plugins>
			</build>
		</profile>

		<profile>
			<id>war</id>
			<activation>
				<property>
					<name>war</name>
				</property>
			</activation>
			<dependencies>
				<dependency>
					<groupId>com.hd123.ia</groupId>
					<artifactId>ia-audit-core</artifactId>
				</dependency>
				<dependency>
					<groupId>com.hd123.ia</groupId>
					<artifactId>ia-authen-fake</artifactId>
				</dependency>
				<dependency>
					<groupId>com.hd123.ia</groupId>
					<artifactId>ia-author-fake</artifactId>
				</dependency>
			</dependencies>
			<build>
				<plugins>
					<plugin>
						<groupId>org.apache.maven.plugins</groupId>
						<artifactId>maven-war-plugin</artifactId>
						<configuration>
							<webappDirectory>${basedir}/war</webappDirectory>
							<archiveClasses>false</archiveClasses>
						</configuration>
					</plugin>
				</plugins>
			</build>
		</profile>
	</profiles>

	<reporting>
		<plugins>
			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-javadoc-plugin</artifactId>
				<version>2.8.1</version>
				<configuration>
					<quiet>true</quiet>
					<docfilessubdirs>true</docfilessubdirs>
				</configuration>
			</plugin>
			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-jxr-plugin</artifactId>
				<version>2.3</version>
			</plugin>
			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-project-info-reports-plugin</artifactId>
				<version>2.4</version>
				<reportSets>
					<reportSet>
						<reports>
							<report>index</report>
							<report>summary</report>
							<report>dependencies</report>
							<report>plugins</report>
						</reports>
					</reportSet>
				</reportSets>
			</plugin>
		</plugins>
	</reporting>
</project>